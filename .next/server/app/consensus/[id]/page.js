(()=>{var e={};e.id=681,e.ids=[681],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},20259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(49434),r(12701),r(35866);var s=r(23191),a=r(88716),l=r(37922),n=r.n(l),i=r(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["consensus",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,49434)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\consensus\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,12701)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\consensus\\[id]\\page.tsx"],u="/consensus/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/consensus/[id]/page",pathname:"/consensus/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},30365:(e,t,r)=>{Promise.resolve().then(r.bind(r,35593))},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]])},15515:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},59593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])},35593:(e,t,r)=>{"use strict";r.d(t,{default:()=>R});var s=r(10326),a=r(17577),l=r.n(a),n=r(35047),i=r(24846),d=r(77506),o=r(41291),c=r(86333),u=r(37358),x=r(58038),m=r(79635),p=r(66184),h=r(59593),b=r(62881);let f=(0,b.Z)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),g=(0,b.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var v=r(41135),y=r(9080),k=r(26394),j=r(99348),w=r(91272),_=r(74690),N=r(8621),M=r(97401),Z=r(58080),P=r(76910),S=r(23495);let R=({initialId:e})=>{let t=(0,n.useRouter)(),{user:r}=(0,_.a)(),{error:b}=(0,P.p)(),{level:R}=(0,w.h)(),[C,q]=(0,a.useState)(null),[E,O]=(0,a.useState)(!0),[F,T]=(0,a.useState)(null),[L,$]=(0,a.useState)(null),[A,D]=(0,a.useState)(""),[U,K]=(0,a.useState)(!1),[W,G]=(0,a.useState)(!1),[z,H]=(0,a.useState)(null),[B,I]=(0,a.useState)(!1),Q=l().useMemo(()=>C?.recent_votes?C.recent_votes.map(e=>({id:e.id,content:`**[${"agree"===e.vote_type?"支持":"反对"}]** ${e.reason||""}`,created_at:e.updated_at,author:{username:e.username,nickname:e.username,avatar:e.is_anonymous?"https://cravatar.eu/helmavatar/Steve/48.png":`https://cravatar.eu/helmavatar/${e.username}/48.png`,custom_title:e.is_anonymous?void 0:`Lv.${e.user_level}`},likes_count:e.likes?.length||0,is_liked:e.is_liked_by_me,replies:(e.replies||[]).map(e=>({id:e.id||Math.random(),content:e.content,created_at:e.created_at,author:{username:e.username,nickname:e.username,avatar:`https://cravatar.eu/helmavatar/${e.username}/48.png`,custom_title:`Lv.${e.user_level}`}}))})):[],[C]),X=async(e,t)=>{if(t&&C)try{let r=await (0,j.Z_)(t,e);q(e=>{if(!e||!e.recent_votes)return e;let s=e.recent_votes.map(e=>e.id===t?{...e,replies:[...e.replies||[],r.reply]}:e);return{...e,recent_votes:s}})}catch(e){throw b(e.response?.data?.detail||"回复失败"),e}},J=async e=>{try{await (0,j.JT)(e),q(t=>{if(!t||!t.recent_votes)return t;let s=t.recent_votes.map(t=>{if(t.id===e){let e=!t.is_liked_by_me;return{...t,is_liked_by_me:e,likes:e?[...t.likes,r?.username||""]:t.likes.filter(e=>e!==r?.username)}}return t});return{...t,recent_votes:s}})}catch(e){console.error("Failed to like vote",e)}};(0,a.useEffect)(()=>{e&&V(e)},[e]);let V=async e=>{try{O(!0);let t=await (0,j.pU)(e);q(t),t.my_vote&&($(t.my_vote.vote_type),D(t.my_vote.reason||""),K(t.my_vote.is_anonymous||!1))}catch(e){console.error("Failed to fetch proposal details",e),T("无法加载提议详情，请稍后重试")}finally{O(!1)}},Y=async e=>{if(e.preventDefault(),L&&C){if(C.min_level>0&&(null===R||R<C.min_level)){H(`需要等级达到 Lv.${C.min_level} 才能参与`);return}G(!0),H(null);try{await (0,j.QB)({proposal_id:C.id,vote_type:L,reason:A,is_anonymous:U}),await V(C.id),I(!1)}catch(e){H(e.response?.data?.detail||"提交失败，请重试")}finally{G(!1)}}};if(E)return s.jsx("div",{className:"min-h-screen pt-24 pb-12 flex justify-center bg-slate-50/50 dark:bg-slate-950",children:s.jsx(d.Z,{className:"w-8 h-8 animate-spin text-blue-500"})});if(F||!C)return(0,s.jsxs)("div",{className:"min-h-screen pt-24 pb-12 flex flex-col items-center justify-center text-center px-4 bg-slate-50/50 dark:bg-slate-950",children:[s.jsx(o.Z,{className:"w-16 h-16 text-red-500 mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"出错了"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:F||"提议不存在"}),s.jsx("button",{onClick:()=>t.push("/consensus"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"返回列表"})]});let ee=0===C.min_level||null!==R&&R>=C.min_level,et=C.stats.total,er=et>0?C.stats.agree/et*100:0,es=et>0?C.stats.disagree/et*100:0,ea=!!C.end_time&&new Date(C.end_time)<new Date,el=C.is_active&&!ea;return s.jsx(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen pt-24 pb-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("button",{onClick:()=>t.push("/consensus"),className:"group mb-8 flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:[s.jsx("div",{className:"p-1.5 rounded-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 group-hover:border-slate-300 dark:group-hover:border-slate-600 transition-colors",children:s.jsx(c.Z,{className:"w-4 h-4"})}),s.jsx("span",{className:"font-medium",children:"返回提议列表"})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[s.jsx("span",{className:(0,v.Z)("px-3 py-1 rounded-full text-xs font-bold border",el?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/30":"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"),children:el?"进行中":"已结束"}),(0,s.jsxs)("span",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[s.jsx(u.Z,{className:"w-3.5 h-3.5"}),"发布于 ",(0,N.WU)(new Date(C.created_at),"yyyy年MM月dd日")]}),C.min_level>0&&(0,s.jsxs)("span",{className:"text-sm text-amber-600 dark:text-amber-500 flex items-center gap-1 font-medium",children:[s.jsx(x.Z,{className:"w-3.5 h-3.5"}),"Lv.",C.min_level," 以上可参与"]})]}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight leading-tight",children:C.title})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-8 space-y-8",children:[s.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-6 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:s.jsx(m.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:"管理员"}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"官方发布"})]})]}),s.jsx("article",{className:"prose prose-lg dark:prose-invert max-w-none text-slate-600 dark:text-slate-300",children:s.jsx(y.UG,{remarkPlugins:[k.Z],children:C.content})})]})}),s.jsx(S.Z,{comments:Q,currentUser:r,onSubmit:X,onLike:J,loading:E,title:"玩家讨论",hideMainInput:!0,className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 sm:p-8"})]}),(0,s.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(p.Z,{className:"w-5 h-5 text-blue-500"}),"投票统计"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsxs)("span",{className:"font-medium text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(h.Z,{className:"w-4 h-4"})," 支持"]}),(0,s.jsxs)("span",{className:"font-bold text-slate-900 dark:text-white",children:[er.toFixed(1),"%"]})]}),s.jsx("div",{className:"h-3 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx(i.E.div,{initial:{width:0},animate:{width:`${er}%`},className:"h-full bg-green-500 rounded-full"})}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[C.stats.agree," 票"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsxs)("span",{className:"font-medium text-red-600 dark:text-red-400 flex items-center gap-1",children:[s.jsx(f,{className:"w-4 h-4"})," 反对"]}),(0,s.jsxs)("span",{className:"font-bold text-slate-900 dark:text-white",children:[es.toFixed(1),"%"]})]}),s.jsx("div",{className:"h-3 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx(i.E.div,{initial:{width:0},animate:{width:`${es}%`},className:"h-full bg-red-500 rounded-full"})}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[C.stats.disagree," 票"]})]}),(0,s.jsxs)("div",{className:"pt-6 border-t border-slate-100 dark:border-slate-800 grid grid-cols-2 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:et}),s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mt-1",children:"总票数"})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:C.end_time?(0,M.Q)(new Date(C.end_time),{locale:Z.U}):"永久"}),s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mt-1",children:el?"剩余时间":"已结束"})]})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 sticky top-24",children:C.my_vote&&!B?(0,s.jsxs)("div",{className:"text-center py-4",children:[s.jsx("div",{className:(0,v.Z)("w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl","agree"===C.my_vote.vote_type?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:"agree"===C.my_vote.vote_type?s.jsx(h.Z,{className:"w-8 h-8"}):s.jsx(f,{className:"w-8 h-8"})}),(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:["你已投 ","agree"===C.my_vote.vote_type?"支持":"反对"," 票"]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"感谢你的参与！"}),el&&s.jsx("button",{onClick:()=>I(!0),className:"text-blue-600 hover:text-blue-700 text-sm font-medium hover:underline",children:"修改我的投票"})]}):(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:B?"修改投票":"参与投票"}),ee?el?(0,s.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>$("agree"),className:(0,v.Z)("flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all","agree"===L?"border-green-500 bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"border-slate-200 hover:border-green-200 dark:border-slate-700 dark:hover:border-green-900"),children:[s.jsx(h.Z,{className:(0,v.Z)("w-6 h-6","agree"===L&&"fill-current")}),s.jsx("span",{className:"font-bold",children:"支持"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>$("disagree"),className:(0,v.Z)("flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all","disagree"===L?"border-red-500 bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400":"border-slate-200 hover:border-red-200 dark:border-slate-700 dark:hover:border-red-900"),children:[s.jsx(f,{className:(0,v.Z)("w-6 h-6","disagree"===L&&"fill-current")}),s.jsx("span",{className:"font-bold",children:"反对"})]})]}),s.jsx("textarea",{value:A,onChange:e=>D(e.target.value),placeholder:"说说你的理由... (推荐填写)",className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none h-24 text-sm",maxLength:500}),s.jsx("div",{className:"flex items-center justify-between pt-2",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[s.jsx("input",{type:"checkbox",checked:U,onChange:e=>K(e.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 dark:bg-slate-700 dark:border-slate-600 w-4 h-4"}),s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"匿名投票"})]})}),(0,s.jsxs)("button",{type:"submit",disabled:W||!L,className:(0,v.Z)("w-full py-3 rounded-xl font-bold text-white transition-all shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2",L?"bg-blue-600 hover:bg-blue-700 active:scale-95":"bg-slate-300 dark:bg-slate-700 cursor-not-allowed text-slate-500 dark:text-slate-500 shadow-none"),children:[W&&s.jsx(d.Z,{className:"w-5 h-5 animate-spin"}),B?"更新投票":"提交投票"]}),B&&s.jsx("button",{type:"button",onClick:()=>I(!1),className:"w-full text-center text-sm text-slate-500 hover:text-slate-900 dark:hover:text-slate-300",children:"取消"}),z&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[s.jsx(o.Z,{className:"w-4 h-4 shrink-0"}),z]})]}):(0,s.jsxs)("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsx(g,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),s.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:"投票已结束"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"感谢关注"})]}):(0,s.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-900/30 rounded-xl p-4 flex items-start gap-3",children:[s.jsx(g,{className:"w-5 h-5 text-amber-600 dark:text-amber-500 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-bold text-amber-800 dark:text-amber-400 text-sm",children:"权限不足"}),(0,s.jsxs)("p",{className:"text-amber-700 dark:text-amber-500/80 text-xs mt-1",children:["需要等级达到 Lv.",C.min_level," 才能参与投票。"]})]})]})]})})]})]})]})})}},91272:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var s=r(20655);let a=()=>(0,s.l)()},99348:(e,t,r)=>{"use strict";r.d(t,{Bp:()=>a,JT:()=>i,QB:()=>n,Z_:()=>d,pU:()=>l});var s=r(33385);let a=async(e=!1)=>(await s.ZP.get("/api/consensus/proposals",{params:{active_only:e}})).data,l=async e=>(await s.ZP.get(`/api/consensus/proposals/${e}`)).data,n=async e=>(await s.ZP.post("/api/consensus/vote",e)).data,i=async e=>(await s.ZP.post(`/api/consensus/votes/${e}/like`)).data,d=async(e,t)=>(await s.ZP.post(`/api/consensus/votes/${e}/reply`,{content:t})).data},58585:(e,t,r)=>{"use strict";var s=r(61085);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(83953),a=r(16399);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return d},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return x},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return o}});let a=r(54580),l=r(72934),n=r(8586),i="NEXT_REDIRECT";function d(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let s=Error(i);s.digest=i+";"+t+";"+e+";"+r+";";let l=a.requestAsyncStorage.getStore();return l&&(s.mutableCookies=l.mutableCookies),s}function o(e,t){void 0===t&&(t="replace");let r=l.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=l.actionAsyncStorage.getStore();throw d(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),l=Number(a);return t===i&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(l)&&l in n.RedirectStatusCode}function x(e){return u(e)?e.digest.split(";",3)[2]:null}function m(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},49434:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,generateMetadata:()=>d,generateStaticParams:()=>o,revalidate:()=>n});var s=r(19510),a=r(58585);let l=(0,r(68570).createProxy)(String.raw`D:\编程\KukeMC-Website\KukeMC-WebSite\src\components\next\ProposalDetailClient.tsx#default`),n=60;async function i(e){try{let t=await fetch(`https://api.kuke.ink/api/consensus/proposals/${e}`,{next:{revalidate:60}});if(!t.ok){if(404===t.status)return null;throw Error("Failed to fetch proposal")}return t.json()}catch(e){return console.error(e),null}}async function d({params:e}){let t=await i(e.id);return t?{title:`${t.title} - 玩家众议`,description:t.content?t.content.substring(0,160):"KukeMC 玩家众议提案"}:{title:"提案不存在 - KukeMC"}}async function o(){return[]}async function c({params:e}){return await i(e.id)||(0,a.notFound)(),s.jsx(l,{initialId:Number(e.id)})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[856,503,64,609,621,136,495],()=>r(20259));module.exports=s})();