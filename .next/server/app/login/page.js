(()=>{var e={};e.id=626,e.ids=[626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},79905:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(94553),s(12701),s(35866);var a=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,94553)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,12701)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\login\\page.tsx"],x="/login/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80498:(e,t,s)=>{Promise.resolve().then(s.bind(s,91446))},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},43810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},93892:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},60763:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},32130:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},91446:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var a=s(10326),r=s(17577),i=s(35047),l=s(60763),n=s(93892),c=s(79635),d=s(86333),o=s(77506),x=s(32130),u=s(32933),p=s(43810),m=s(30361),h=s(24846),b=s(88129),g=s(41135),y=s(33385),f=s(74690),j=s(76910);let v=()=>{let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{login:s,user:v}=(0,f.a)(),{error:k}=(0,j.p)(),[N,w]=(0,r.useState)("input"),[q,Z]=(0,r.useState)(""),[C,M]=(0,r.useState)(""),[z,P]=(0,r.useState)(!1),[S,_]=(0,r.useState)(""),[E,K]=(0,r.useState)(!1),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{v&&e.push("/")},[v,e]),(0,r.useEffect)(()=>{"true"===t.get("expired")&&(k("登录已过期，请重新登录"),e.replace("/login"))},[t,k,e]),(0,r.useEffect)(()=>()=>{D.current&&clearInterval(D.current)},[]);let I=async e=>{if(e.preventDefault(),q.trim()){P(!0),_("");try{let e=(await y.ZP.post("/api/player-auth/init",{username:q})).data.code;M(e),w("verify"),D.current&&clearInterval(D.current),D.current=setInterval(()=>W(q,e),2e3)}catch(e){_(e.response?.data?.detail||"Failed to initialize login")}finally{P(!1)}}},W=async(t,a)=>{try{let r=await y.ZP.get("/api/player-auth/check",{params:{username:t,code:a}});r.data.verified&&(D.current&&clearInterval(D.current),w("success"),setTimeout(()=>{s(r.data.user,r.data.token),e.push("/")},2e3))}catch(e){}};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-blue-500/10 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full bg-cyan-500/10 blur-[100px]"})]}),(0,a.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-8 z-10",children:[(0,a.jsxs)("div",{className:"hidden lg:flex flex-col justify-center p-8 space-y-6",children:[(0,a.jsxs)(h.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 text-blue-600 dark:text-blue-400 text-sm font-medium mb-4",children:[a.jsx(l.Z,{size:16}),a.jsx("span",{children:"安全验证系统"})]}),(0,a.jsxs)("h1",{className:"text-5xl font-bold text-slate-900 dark:text-white mb-4 leading-tight",children:["欢迎回到 ",a.jsx("br",{}),a.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:"KukeMC"})]}),a.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-md",children:"请使用您的 Minecraft 游戏账号进行验证登录。无需注册密码，通过游戏内指令即可快速安全地登录。"})]}),(0,a.jsxs)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"grid grid-cols-2 gap-4 mt-8",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 backdrop-blur-sm",children:[a.jsx(n.Z,{className:"w-8 h-8 text-blue-500 mb-3"}),a.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"即时同步"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"数据与游戏服务器实时互通"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 backdrop-blur-sm",children:[a.jsx(c.Z,{className:"w-8 h-8 text-cyan-500 mb-3"}),a.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"账号安全"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"无需密码，杜绝盗号风险"})]})]})]}),(0,a.jsxs)(h.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}},exit:{opacity:0,y:-20}},initial:"hidden",animate:"visible",className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 p-8 lg:p-12 relative",children:[a.jsx("button",{onClick:()=>e.push("/"),className:"absolute top-6 left-6 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-slate-500",children:a.jsx(d.Z,{size:20})}),a.jsx("div",{className:"mt-8",children:(0,a.jsxs)(b.M,{mode:"wait",children:["input"===N&&(0,a.jsxs)(h.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"玩家登录"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"请输入您的游戏ID以开始验证"})]}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Minecraft ID"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:q,onChange:e=>Z(e.target.value),placeholder:"例如: Steve",className:"w-full pl-12 pr-4 py-4 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-medium",autoFocus:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:a.jsx("img",{src:`https://cravatar.eu/helmavatar/${q||"Steve"}/24.png`,alt:"avatar",className:"w-6 h-6 rounded"})})]})]}),S&&a.jsx(h.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm text-center",children:S}),a.jsx("button",{type:"submit",disabled:z||!q,className:"w-full py-4 px-6 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-blue-500/25 transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-2",children:z?a.jsx(o.Z,{className:"animate-spin",size:24}):"获取验证指令"})]})]},"input"),"verify"===N&&(0,a.jsxs)(h.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"text-center",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"验证身份"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"请在游戏内输入以下指令"})]}),(0,a.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6 mb-8 relative group cursor-pointer border border-slate-800 shadow-inner overflow-hidden",onClick:()=>{navigator.clipboard.writeText(`/weblogin ${C}`),K(!0),setTimeout(()=>K(!1),2e3)},children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 text-green-400 font-mono text-xl font-bold tracking-wide",children:[a.jsx(x.Z,{size:24}),(0,a.jsxs)("span",{children:["/weblogin ",C]})]}),a.jsx("div",{className:(0,g.Z)("absolute inset-0 flex items-center justify-center bg-slate-900/95 transition-all duration-200 backdrop-blur-sm",E?"opacity-100":"opacity-0 group-hover:opacity-100"),children:(0,a.jsxs)("span",{className:(0,g.Z)("font-medium flex items-center gap-2 transition-transform duration-200",E?"text-green-400 scale-110":"text-white scale-100"),children:[E?a.jsx(u.Z,{size:20}):a.jsx(p.Z,{size:20}),E?"已复制到剪贴板":"点击复制指令"]})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium animate-pulse",children:[a.jsx(o.Z,{className:"animate-spin",size:20}),a.jsx("span",{children:"正在等待验证..."})]}),a.jsx("p",{className:"text-sm text-slate-400",children:"请不要关闭此页面，验证成功后将自动跳转"}),a.jsx("button",{onClick:()=>{w("input"),D.current&&clearInterval(D.current)},className:"mt-4 text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors",children:"返回修改ID"})]})]},"verify"),"success"===N&&(0,a.jsxs)(h.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(m.Z,{size:48,className:"text-green-500"})}),a.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"验证成功"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"正在跳转至首页..."})]},"success")]})})]})]})]})}},94553:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>l});var a=s(19510),r=s(71159);let i=(0,s(68570).createProxy)(String.raw`D:\编程\KukeMC-Website\KukeMC-WebSite\src\components\next\LoginClient.tsx#default`),l={title:"玩家登录 - KukeMC",description:"登录 KukeMC 官网，管理您的个人资料和查看游戏数据。"};function n(){return a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})}),children:a.jsx(i,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[856,136],()=>s(79905));module.exports=a})();