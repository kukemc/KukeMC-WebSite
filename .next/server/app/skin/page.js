(()=>{var e={};e.id=833,e.ids=[833],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(58908),s(12701),s(35866);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),d=s(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(t,n);let o=["",{children:["skin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58908)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\skin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,12701)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\skin\\page.tsx"],x="/skin/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/skin/page",pathname:"/skin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},18058:(e,t,s)=>{Promise.resolve().then(s.bind(s,9243))},63062:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9243:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var a=s(10326),r=s(17577),l=s(24846),i=s(88129),d=s(7027);let n=(0,s(62881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var o=s(75820),c=s(63685),x=s(63062),p=s(30361),m=s(94019),u=s(50949),b=s(77506),h=s(33385),g=s(41135),k=s(74690),j=s(76910);let f=()=>{let{user:e}=(0,k.a)(),{success:t,error:s,warning:f}=(0,j.p)(),[v,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[Z,z]=(0,r.useState)(!1),[C,q]=(0,r.useState)("upload"),[M,P]=(0,r.useState)(""),[_,S]=(0,r.useState)("3d");(0,r.useEffect)(()=>{e&&P(e.username)},[e]);let K=(e,t)=>{if(e.target.files&&e.target.files.length>0){let a=e.target.files[0];if(a.size>1048576){s("文件大小不能超过 1MB");return}if(!a.type.startsWith("image/png")){s("只支持 PNG 格式图片");return}"skin"===t?y(a):w(a)}},D=async a=>{if(a.preventDefault(),!v&&!N){f("请至少选择一个文件上传");return}z(!0);let r=new FormData;v&&r.append("skin",v),N&&r.append("cape",N);try{await h.ZP.post("/api/skin/upload",r,{headers:{"Content-Type":"multipart/form-data"}}),t("上传成功！请重新进入服务器查看效果。"),y(null),w(null),M===e?.username&&(P(""),setTimeout(()=>P(M),100))}catch(e){s(e.response?.data?.error||"上传失败，请确保文件格式正确")}finally{z(!1)}};return a.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[a.jsx(l.E.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center justify-center p-4 bg-emerald-100 dark:bg-emerald-900/20 rounded-2xl mb-4 text-emerald-600 dark:text-emerald-400",children:a.jsx(o.Z,{size:40})}),a.jsx(l.E.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-4xl font-bold text-slate-900 dark:text-white mb-4",children:"皮肤站"}),(0,a.jsxs)(l.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-slate-500 dark:text-slate-400 max-w-2xl mx-auto text-lg",children:["自定义您的游戏形象，支持上传皮肤和披风。",a.jsx("br",{className:"hidden sm:block"}),"让您在 KukeMC 的世界中与众不同。"]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-md rounded-2xl border border-slate-200 dark:border-slate-800 p-6 sm:p-8 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg",children:a.jsx(c.Z,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"上传新外观"})]}),e?(0,a.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"皮肤文件 (Skin)"}),(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("input",{type:"file",accept:"image/png",onChange:e=>K(e,"skin"),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,a.jsxs)("div",{className:(0,g.Z)("w-full border-2 border-dashed rounded-xl p-6 flex items-center gap-4 transition-all",v?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/10":"border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-950 group-hover:border-slate-400 dark:group-hover:border-slate-600"),children:[a.jsx("div",{className:(0,g.Z)("w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",v?"bg-emerald-100 text-emerald-600":"bg-slate-200 dark:bg-slate-800 text-slate-400"),children:v?a.jsx(p.Z,{size:24}):a.jsx(o.Z,{size:24})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:(0,g.Z)("font-medium truncate",v?"text-emerald-700 dark:text-emerald-400":"text-slate-600 dark:text-slate-300"),children:v?v.name:"点击选择皮肤文件"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:v?`${(v.size/1024).toFixed(1)} KB`:"支持 64x64 或 64x32 PNG 格式"})]}),v&&a.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),y(null)},className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full z-20 text-slate-400",children:a.jsx(m.Z,{size:16})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["披风文件 (Cape) ",a.jsx("span",{className:"text-slate-400 font-normal text-xs ml-2",children:"(可选)"})]}),(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("input",{type:"file",accept:"image/png",onChange:e=>K(e,"cape"),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,a.jsxs)("div",{className:(0,g.Z)("w-full border-2 border-dashed rounded-xl p-6 flex items-center gap-4 transition-all",N?"border-purple-500 bg-purple-50 dark:bg-purple-900/10":"border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-950 group-hover:border-slate-400 dark:group-hover:border-slate-600"),children:[a.jsx("div",{className:(0,g.Z)("w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",N?"bg-purple-100 text-purple-600":"bg-slate-200 dark:bg-slate-800 text-slate-400"),children:N?a.jsx(p.Z,{size:24}):a.jsx("div",{className:"w-6 h-8 border-2 border-current rounded-sm"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:(0,g.Z)("font-medium truncate",N?"text-purple-700 dark:text-purple-400":"text-slate-600 dark:text-slate-300"),children:N?N.name:"点击选择披风文件"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:N?`${(N.size/1024).toFixed(1)} KB`:"支持标准披风 PNG 格式"})]}),N&&a.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),w(null)},className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full z-20 text-slate-400",children:a.jsx(m.Z,{size:16})})]})]})]}),(0,a.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/30 rounded-xl p-4 flex gap-3",children:[a.jsx(u.Z,{size:20,className:"text-amber-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-amber-700 dark:text-amber-400/90",children:[a.jsx("p",{className:"font-bold mb-1",children:"注意事项"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 opacity-90",children:[a.jsx("li",{children:"上传后可能需要 1-5 分钟缓存刷新"}),(0,a.jsxs)("li",{children:["游戏内请使用 ",a.jsx("code",{className:"bg-amber-100 dark:bg-amber-900/40 px-1 rounded",children:"/skin update"})," 刷新"]}),a.jsx("li",{children:"严禁上传色情、暴力等违规皮肤"})]})]})]}),a.jsx("button",{type:"submit",disabled:Z||!v&&!N,className:"w-full py-3.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl font-bold shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/30 hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:Z?(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{size:20,className:"animate-spin"}),"正在上传..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{size:20}),"确认上传"]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[300px] text-center p-6 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50/50 dark:bg-slate-900/50",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-200 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4 text-slate-400",children:a.jsx(x.Z,{size:32})}),a.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"需要登录"}),a.jsx("p",{className:"text-slate-500 mb-6 max-w-xs",children:"请先登录账号，以便我们将皮肤应用到您的角色上。"}),a.jsx("a",{href:"/login",className:"px-6 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors font-medium",children:"去登录"})]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-md rounded-2xl border border-slate-200 dark:border-slate-800 p-6 sm:p-8 shadow-xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-lg",children:a.jsx(o.Z,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"皮肤预览"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center min-h-[300px]",children:[a.jsx("div",{className:"w-full max-w-sm mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:M,onChange:e=>P(e.target.value),placeholder:"输入玩家ID查看皮肤...",className:"w-full px-4 py-3 pl-10 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 outline-none transition-all"}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:a.jsx(x.Z,{size:18})}),M&&a.jsx("button",{onClick:()=>P(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:a.jsx(m.Z,{size:16})})]})}),a.jsx(i.M,{mode:"wait",children:M?a.jsx(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full",children:a.jsx(({username:e})=>{if(!e)return null;let t=`https://minotar.net/skin/${e}`,s=`https://minotar.net/helm/${e}/100.png`,r=`https://minotar.net/armor/body/${e}/150.png`;return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>window.open(t,"_blank"),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-emerald-500/20 to-blue-500/20 rounded-xl blur-xl group-hover:blur-2xl transition-all opacity-50 group-hover:opacity-100"}),a.jsx("div",{className:"relative bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl flex items-center justify-center min-h-[200px] min-w-[150px]",children:"3d"===_?a.jsx("img",{src:r,alt:`${e}'s skin`,className:"h-48 w-auto object-contain drop-shadow-lg"}):a.jsx("img",{src:s,alt:`${e}'s helm`,className:"h-32 w-32 object-contain drop-shadow-lg rounded-lg"})}),a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"p-1.5 bg-black/50 text-white rounded-lg backdrop-blur-sm",children:a.jsx(d.Z,{size:14})})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>S("3d"),className:(0,g.Z)("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","3d"===_?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"),children:"全身预览"}),a.jsx("button",{onClick:()=>S("2d"),className:(0,g.Z)("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","2d"===_?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"),children:"头像预览"})]}),a.jsx("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("a",{href:`https://minotar.net/download/${e}`,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-sm font-medium",children:[a.jsx(n,{size:16}),"下载此皮肤"]})})]})},{username:M})},M):(0,a.jsxs)("div",{className:"text-center text-slate-400 py-12",children:[a.jsx(o.Z,{size:64,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"输入玩家ID查看皮肤预览"})]})})]})]})]})]})})}},58908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var a=s(19510);let r=(0,s(68570).createProxy)(String.raw`D:\编程\KukeMC-Website\KukeMC-WebSite\src\components\next\SkinClient.tsx#default`),l={title:"皮肤站 | KukeMC",description:"上传和管理您的 Minecraft 皮肤与披风。"};function i(){return a.jsx(r,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[856,136],()=>s(977));module.exports=a})();