(()=>{var e={};e.id=740,e.ids=[740],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},73543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>n}),a(4481),a(12701),a(35866);var s=a(23191),r=a(88716),l=a(37922),d=a.n(l),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let n=["",{children:["stats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4481)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\stats\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,12701)),"D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\编程\\KukeMC-Website\\KukeMC-WebSite\\src\\app\\stats\\page.tsx"],x="/stats/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/stats/page",pathname:"/stats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},64133:(e,t,a)=>{Promise.resolve().then(a.bind(a,15401))},37358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66184:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]])},11890:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48998:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},89265:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]])},21405:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},88307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},58907:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},15401:(e,t,a)=>{"use strict";a.d(t,{default:()=>N});var s=a(10326),r=a(17577),l=a(90434),d=a(24846),i=a(79635),o=a(48998),n=a(66184),c=a(58907),x=a(37358),p=a(21405),h=a(88307),u=a(89265),m=a(62881);let b=(0,m.Z)("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);var g=a(11890),k=a(39183);let v=(0,m.Z)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);var y=a(41135),j=a(33385);let f=({icon:e,title:t,value:a,color:r})=>(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-sm p-6 rounded-xl border border-slate-200 dark:border-slate-800 flex items-center gap-5 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group shadow-sm",children:[s.jsx("div",{className:`p-4 bg-slate-100 dark:bg-slate-950 rounded-xl border border-slate-200 dark:border-slate-800 group-hover:border-${r}-500/30 group-hover:shadow-sm group-hover:shadow-${r}-500/10 transition-all duration-300 shrink-0`,children:e}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:t}),s.jsx("p",{className:(0,y.Z)("font-bold text-slate-900 dark:text-white tracking-tight group-hover:text-brand-600 dark:group-hover:text-brand-100 transition-colors whitespace-nowrap",a.length>12?"text-base":a.length>8?"text-lg":"text-2xl"),title:a,children:a})]})]}),N=()=>{let[e,t]=(0,r.useState)(null),[a,m]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[Z,M]=(0,r.useState)(1),[_,C]=(0,r.useState)(""),[q,S]=(0,r.useState)(""),[z,P]=(0,r.useState)("total"),[E,K]=(0,r.useState)(30);(0,r.useEffect)(()=>{let e=setTimeout(()=>{S(_),M(1)},500);return()=>clearTimeout(e)},[_]);let W=async()=>{try{let e=await j.ZP.get("/api/playtime/overview");t(e.data)}catch(e){console.error(e)}},A=async()=>{w(!0);try{let e={page:Z,per_page:30,search:q};"recent"===z&&(e.days=E);let t=await j.ZP.get("total"===z?"/api/playtime/total_ranking":"/api/playtime/recent_ranking",{params:e});m(t.data)}catch(e){console.error(e)}finally{w(!1)}};(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{A()},[Z,q,z,E]);let L=e=>{let t=Math.floor(e/1e3),a=Math.floor(t/3600),s=Math.floor(t%3600/60);return 0===a?`${s}分钟`:`${a}小时${s}分钟`};return s.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-6xl mx-auto space-y-8",children:(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500",children:"数据统计"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:"探索服务器的历史数据记录，查看排行榜和活跃玩家，感谢每一位玩家的陪伴。"})]}),e&&(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[s.jsx(f,{icon:s.jsx(i.Z,{className:"text-blue-500 dark:text-blue-400"}),title:"总玩家数",value:e.total_players,color:"blue"}),s.jsx(f,{icon:s.jsx(o.Z,{className:"text-emerald-500 dark:text-emerald-400"}),title:"总游戏时长",value:e.total_playtime,color:"emerald"}),s.jsx(f,{icon:s.jsx(n.Z,{className:"text-purple-500 dark:text-purple-400"}),title:"今日在线",value:e.today_online,color:"purple"}),s.jsx(f,{icon:s.jsx(c.Z,{className:"text-amber-500 dark:text-amber-400"}),title:"活跃玩家",value:e.active_players,color:"amber"})]}),(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-md rounded-2xl p-6 border border-slate-200 dark:border-slate-800 mb-8 flex flex-col lg:flex-row justify-between gap-6 shadow-sm transition-colors duration-300",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex bg-slate-100 dark:bg-slate-950 rounded-lg p-1 border border-slate-200 dark:border-slate-800 transition-colors duration-300",children:[s.jsx("button",{onClick:()=>{P("total"),M(1)},className:(0,y.Z)("px-4 py-2 rounded-md text-sm font-medium transition-all duration-200","total"===z?"bg-brand-600 text-white shadow-sm shadow-brand-500/20":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-800"),children:"总排行榜"}),s.jsx("button",{onClick:()=>{P("recent"),M(1)},className:(0,y.Z)("px-4 py-2 rounded-md text-sm font-medium transition-all duration-200","recent"===z?"bg-brand-600 text-white shadow-sm shadow-brand-500/20":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-800"),children:"近期活跃"})]}),"recent"===z&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:E,onChange:e=>{K(Number(e.target.value)),M(1)},className:"appearance-none bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 text-slate-700 dark:text-slate-200 text-sm rounded-lg pl-4 pr-10 py-2 focus:ring-brand-500 focus:border-brand-500 cursor-pointer hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[s.jsx("option",{value:7,children:"最近 7 天"}),s.jsx("option",{value:30,children:"最近 30 天"}),s.jsx("option",{value:90,children:"最近 90 天"})]}),s.jsx(x.Z,{className:"absolute right-3 top-2.5 text-slate-500 pointer-events-none",size:16})]}),s.jsx("button",{onClick:()=>{A(),W()},className:"p-2 rounded-lg bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-800 transition-all",title:"刷新数据",children:s.jsx(p.Z,{size:20,className:N?"animate-spin":""})})]}),(0,s.jsxs)("div",{className:"relative w-full lg:w-72",children:[s.jsx("input",{type:"text",placeholder:"搜索玩家...",value:_,onChange:e=>C(e.target.value),className:"w-full bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-xl py-2.5 pl-11 pr-4 text-slate-900 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 transition-all shadow-inner placeholder:text-slate-400 dark:placeholder:text-slate-500"}),s.jsx(h.Z,{className:"absolute left-4 top-3 text-slate-400 dark:text-slate-500",size:18})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-slate-900/50 backdrop-blur-md rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm transition-colors duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-50/80 dark:bg-slate-950/80 text-slate-500 dark:text-slate-400 uppercase tracking-wider font-medium backdrop-blur-sm transition-colors duration-300",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-5",children:"排名"}),s.jsx("th",{className:"px-6 py-5",children:"玩家"}),s.jsx("th",{className:"px-6 py-5",children:"游戏时长"}),s.jsx("th",{className:"px-6 py-5",children:"total"===z?"登录次数":"活跃天数"}),s.jsx("th",{className:"px-6 py-5",children:"最后登录"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200/50 dark:divide-slate-800/50",children:N?[...Array(10)].map((e,t)=>(0,s.jsxs)("tr",{className:"animate-pulse",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-12 bg-slate-200 dark:bg-slate-800/50 rounded"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-8 w-48 bg-slate-200 dark:bg-slate-800/50 rounded"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-24 bg-slate-200 dark:bg-slate-800/50 rounded"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-16 bg-slate-200 dark:bg-slate-800/50 rounded"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"h-6 w-32 bg-slate-200 dark:bg-slate-800/50 rounded"})})]},t)):a?.data.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-16 text-center text-slate-500",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(h.Z,{size:48,className:"text-slate-300 dark:text-slate-700"}),s.jsx("p",{className:"text-lg",children:"未找到相关玩家数据"})]})})}):a?.data.map((e,t)=>{let a=(Z-1)*30+t+1;return s.jsxs(d.E.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.03*t},className:y.Z("hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors group",1===a?"bg-yellow-500/5 hover:bg-yellow-500/10":2===a?"bg-slate-400/5 hover:bg-slate-400/10":3===a?"bg-orange-500/5 hover:bg-orange-500/10":""),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center gap-2",children:1===a?s.jsx(u.Z,{className:"text-yellow-500 dark:text-yellow-400",size:20}):2===a?s.jsx(u.Z,{className:"text-slate-400 dark:text-slate-300",size:20}):3===a?s.jsx(u.Z,{className:"text-orange-500 dark:text-orange-400",size:20}):s.jsx("span",{className:"font-mono text-slate-500 w-5 text-center",children:a})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:`https://cravatar.eu/helmavatar/${e.username}/40.png`,alt:e.username,className:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-800 shadow-sm group-hover:scale-110 transition-transform",onError:e=>e.target.src="https://cravatar.eu/helmavatar/MHF_Steve/40.png"}),s.jsx("div",{className:y.Z("absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white dark:border-slate-900",e.online?"bg-green-500":"bg-slate-400 dark:bg-slate-600")})]}),s.jsx(l.default,{href:`/player/${e.username}`,className:y.Z("font-bold text-base hover:underline",1===a?"text-yellow-600 dark:text-yellow-400":2===a?"text-slate-600 dark:text-slate-300":3===a?"text-orange-600 dark:text-orange-400":"text-slate-700 dark:text-slate-200"),children:e.username})]})}),s.jsx("td",{className:"px-6 py-4 text-brand-600 dark:text-brand-300 font-medium",children:L(Number("total"===z?e.total_playtime:e.recent_playtime))}),s.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:"total"===z?e.login_count:e.play_days}),s.jsx("span",{className:"text-xs",children:"total"===z?"次":"天"})]})}),s.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400 text-sm",children:new Date(e.last_login).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]},e.username)})})]})}),a&&a.pagination.total_pages>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row items-center justify-between gap-4 bg-slate-50/50 dark:bg-slate-950/30 transition-colors duration-300",children:[(0,s.jsxs)("div",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["显示 ",(a.pagination.current_page-1)*30+1," - ",Math.min(30*a.pagination.current_page,a.pagination.total)," 条，共 ",a.pagination.total," 条"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>M(1),disabled:1===Z,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-slate-400 transition-colors",title:"第一页",children:s.jsx(b,{size:18})}),s.jsx("button",{onClick:()=>M(e=>Math.max(1,e-1)),disabled:1===Z,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-slate-400 transition-colors",title:"上一页",children:s.jsx(g.Z,{size:18})}),s.jsx("div",{className:"flex items-center gap-1 hidden sm:flex",children:(()=>{let e=a.pagination.total_pages,t=[],r=Math.max(1,Z-2),l=Math.min(e,r+5-1);l-r<4&&(r=Math.max(1,l-5+1));for(let e=r;e<=l;e++)t.push(e);return t.map(e=>s.jsx("button",{onClick:()=>M(e),className:(0,y.Z)("w-9 h-9 rounded-lg text-sm font-bold transition-all duration-200",e===Z?"bg-brand-600 text-white shadow-sm shadow-brand-500/25 scale-105":"text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"),children:e},e))})()}),s.jsx("button",{onClick:()=>M(e=>Math.min(a.pagination.total_pages,e+1)),disabled:Z===a.pagination.total_pages,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-slate-400 transition-colors",title:"下一页",children:s.jsx(k.Z,{size:18})}),s.jsx("button",{onClick:()=>M(a.pagination.total_pages),disabled:Z===a.pagination.total_pages,className:"p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 disabled:opacity-30 disabled:cursor-not-allowed text-slate-500 dark:text-slate-400 transition-colors",title:"最后一页",children:s.jsx(v,{size:18})})]})]})]})]})})})}},4481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,metadata:()=>d});var s=a(19510),r=a(71159);let l=(0,a(68570).createProxy)(String.raw`D:\编程\KukeMC-Website\KukeMC-WebSite\src\components\next\StatsClient.tsx#default`),d={title:"数据统计 - KukeMC",description:"查看服务器玩家在线时长、活跃度排名等统计数据。"};function i(){return s.jsx(r.Suspense,{fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})}),children:s.jsx(l,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[856,136],()=>a(73543));module.exports=s})();